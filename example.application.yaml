spring:
  config:
    import: optional:file:.env.local[.properties]
  application:
    name: oauth
  security:
    oauth2:
      client:
        registration:
          azure:
            client-id: AZURE_CLIENT_ID_HERE
            client-secret: AZURE_CLIENT_SECRET_HERE
            authorization-grant-type: authorization_code
            client-authentication-method: client_secret_post
            redirect-uri: "{baseUrl}/login/oauth2/code/azure"
            scope:
              - openid
              - profile
              - email
              - offline_access
              - User.Read
            client-name: Microsoft Entra ID
        provider:
          azure:
            issuer-uri: https://login.microsoftonline.com/AZURE_TENANT_ID_HERE/v2.0
            user-name-attribute: sub
  data:
    mongodb:
      uri: MONGODB_URI_HERE
      # Alternative configuration:
      # host: localhost
      # port: 27017
      # database: oauth_app

server:
  port: 8080
  ssl:
    enabled: true
    key-store: classpath:tls/dev-localhost.p12
    key-store-type: PKCS12
    key-store-password: changeit
    key-alias: dev-localhost

# JWT Configuration
jwt:
  secret: JTW_SECRET_HERE_256
  expiration: 86400000  # 24 hours in milliseconds
  access-token-expiration: 900000  # 15 minutes in milliseconds
  refresh-token-expiration: 604800000  # 7 days in milliseconds

# Frontend URL for redirects
frontend:
  url: https://localhost:3000
  allowed-origins:
    - https://localhost:3000
    - http://localhost:3000

cookie:
  secure: true  # Required when HTTPS is enabled
  same-site: Strict  # Options: Strict, Lax, None (Strict requires both apps on HTTPS)

app:
  security:
    csrf:
      double-submit-enabled: true
      cookie-name: csrf_token
      header-name: X-CSRF-Token
    refresh-token:
      hashing-enabled: true
      rotation-enabled: true
